/*
[task_local]
京东自营
0 0 1,7,15,21 * * ?  jd_zzljd.js, tag=京东自营, enabled=true
================Loon==============
[Script]
cron "0 0 1,7,15,21 * * ? " script-path=jd_zzljd.js,tag=京东自营
*/
const $ = new Env("应该是没奖励");
const jdCookieNode = $.isNode() ? require('./jdCookie.js') : '';
const notify = $.isNode() ? require('./sendNotify') : '';

var _0xod4='jsjiami.com.v6',_0xod4_=['‮_0xod4'],_0x1552=[_0xod4,'NkZQwqRZ','IcKaG8K7woY=','w48Ow5VNw5k=','DVjCpMKrwps=','GhNT','Tn4two7DnGc=','wpLCnwdpwqc=','w5TDq8Ouw5pRwr0=','VlHDhMOSw4w=','YcO4O8O3Lw==','EQ1HHMKt','wrwQSAPDjg==','J8O0FcOgSw==','MlXCkcKEwqc=','wqMHw4I=','Pxop','w58YBXbCmQ==','wqQlwrBSFMK7acOlKFIZwp4yAl1swr/CmhsBw4PCuRJyehIYKRzCvVpJw4FtFEbCvcK6UcKQwqnDrcKYdMK3w5vDsCdxw47DscKhwqTDgMOvS8OzwoYFYT7CkUUY','wpPDvMOwwq3Dq8OLw551w6Qiwqgzwqd+w5YxwrZ5wo1pwrV9wqMqYsOyPD0HQzYIw59KCsO0w7d7wpPCjVHDmsKORBzCkMOsDMOnX8OLXWLCicOjwpLCvsK4R2d2OcK7IsK8CRxpw5g9wpLCvkvDjDNtw488w6AeZF54wr/ChisoCMKwHG1aLMKuw6E4ClbDlArDjsKPIMOCbMKZYsK5wq7CmsO3GcKQDsKCw5nDs3DDs8Kowr0tw7LDix/DtFBiwpLCmh3Ckgh9','w4zDqDV4Zw==','NgYtwqHDrhnDoMKA','QTvCmALCpw==','KSFhw5jDiQ==','PSZLw5LDhQ==','wr0/wqcdaS/Drg==','w5wYGmDDkTwTw7LCvw==','w6rDsMOmw5pTwrY5w47CmcOfwqvDr8OBw6h7AEvCk8OlwoxCwprCmcKoPwjCsznDmj3ClMOORizCnnZ+wqrDjBHDm2Egw7l7w47DisKQPjDDjcKRHnfDsjvCuU5fw6Rdw7XCqivCsB10wqXDmxTDokPCmV1uwpEtw5zCkGHChVrCkCLDisOJwoDCtsOhCcO6GcOoBGDCsQDDvHwXwrRKw4XDrRvDtGpIDMOtw48nVsOxwqXCgsO4EMK2WcOvw5TCpj/Do8O9Y8Kqa1nDjTLDkWU=','R2luKHs=','w57Djg3Du8KR','wqYJWDXDvQ==','w6PDu3pKw4Q=','DcOUd8Kvw6s=','UsO8w6JG','XjjDnzlVLy0=','O2/ClA==','IMOHXcK8w7vCt8K3JQ==','bMO8NiVIcMKXwqQ=','X8O4w7dGDA==','w4ZXB8Kzbzh0','wqVXw7FmWUzClcOg','EsO3wr/DhsKqAMOHw4PCqw==','wovDvXbCnCnDmMKOwoTDjA==','wpDCtFo=','TWV3NkfCvw==','w642VR/DjMKfw5E1w6HChMO1WsKdw7Rewr7CmMKSbcOdI8KCwp1Ac8K3w7vDqjkdw6bDr8OAZcKZalcjwq3Dpw/CisKiw6NKb8OuCMKdwpfDicKfQmzDnsK8YVobVcKZw5hmUQ==','wrnDocOkw6M=','wrE+wrkGairDq8OHZxgPGsK6PDTCkMOTwqkqwowTw6DCqMOQw4lKw5F/WsKKwqZvZcKiBcOYZcOCRMKKbsKhKWXDkhlhZsKmXsOIZcKXD3sfw67Dgy/CpUfDuMKDw4vDnsO/w7AVw58LwpvDiFNqw480TcKAwqHDgMK8OmQSRsKNe8KTw5AEw4dWwr7CnMOKF8K3wrphfcOVw73CjDPDsMK6NMO7AEfCuSbDrzzCgzMVwqzCpxnCncKyw4lXXEHDuV/Cs3LCocOSZcKe','wqQFTgDDmMOJwps6w4DCicOmW8Oew7xSw6/CisKBLMKLe8KPw5MFMMKawrzDqz8Xw6HDk8ODI8OHZERgw7fCpkTDicOs','wr0lFcObwqU=','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','wr01DsO5wo0=','w5rDnjZARA==','w6sqwox0Eg==','wrPCjE3Cs8OI','ccO1AsOMCg==','QRjCshrCmQ==','GkI4','w6lyw4XDiA==','w41iOsKUWQ==','RsO6VsK1NA==','w5fDhhPDqMKcDw==','YMOjIsKGwqM=','c8OzJsOyMMOsw7NO','VMO4w69WAQ==','GlArwoTDjw==','BMKDFMKHwrU=','wrgpeSjDvg==','VcKwCF3DoMKjwoc=','w4nDtsO/w5hxwrs1woQ=','HH5c','P8OxwrPDhsKNBMOgw6I=','IkI6wpXDqUMLw5U=','wrnDhcOewojDpg==','w5bDncOmw4ly','w5LDmj1ofA==','PMOrwrc=','GQFZPA==','44Os5o6B56e544G+ZSnDpcKDO1Plt43lpIvml5o=','wrfDvcOuwqHDvw==','JQxxYMO/wpcFcg==','wp3DoXzChQ7DnMKQwqs=','feiul+mHueaXqeeam+W+h+iPpOWOsTbDmcKNOsKQVMOLwolCw7fChEvDlGoLQTLDgcOpKsKVS8KUwo3CjMKCw4Yew6trw7Bvw7YyQMKOXsKswp7DqkttwpPDpg==','w6bDiMOWw7xR','w47DrMOSw5xbwr8=','wrIAL8OP','5LiP5LqE6LWh5Y+l','wo8uPcOmwro=','BsOsZQ==','wpbCmcKhw5o=','V3APwq7orZDmsaDlpZfotpXvvqzorJfmooLmnYHnvqHotInph53orrM=','VMK3MELDtMOww4bCnMKqwpXDo8K7wqvChQHDmMOA','w4nDhsOKw6Rq','AMOTwrfDo8KO','w5LDgMKSYkE=','GMKZFsKBwp4=','VsOme8K0Fw==','wrcLPsONwo8=','EA5OPcKF','wqPDo1HCowM=','wobDj8OYBiE=','IVpcwo1y','wqkHw5fCiChaw44=','I8K9wqtK','Eg5C','woLDp8O3KS4xSMOj','FEXCvcKkwrY1Gx0=','QmV/','PWDClsKDwps=','G144','wpfCg+WljOi2qsOJR+WOteWbrRXCig==','wr7DocO4w7U=','PX7Dj089','wrVhw5tsRg==','wqh0w5NPZQ==','wpNIw5BXdg==','bsOqO8Klwo4=','w6XCssOEw5HDlA==','XsO8w68=','GUcowqjDlw==','wpA+wqQ=','LXXCkMKJwp0QJzzCug==','w6gDwrJY','wqkrw7HChg4=','HRlIw7M=','w5JGAcK+YCt8GcOa','wpPCtEfCgQ==','IcOmAzFnwrw=','w4lGB8KnfXY6UMOBwp7Cg8KPSUMBegZUWS4AYsKQNsKQPA8mw7MHNCAbwr7Dplk4XjLDjcOPwpXDoQ==','SV/DvMOWw4nDsw==','w6x/F8KQbQ==','w57CmsOsw5vDkw==','wp7Dun7CphM=','wr4Gw53CvwI=','w73DjG9Ow4I=','ZMO1Jg==','wqgNw5E=','w45+w63DvG4=','6K+P5Yqo6Zii5oWz5ZycDirCqcKWR+i+h+WGtOaiseS/h+aXquWFmeWthlbluJDorZjpga7ovaXohY7mnqXljJbojrLljqvDulBRa8OBLw==','BMKoFsKywp8=','Tn4t','PcO3wrc=','wqbDgsOFCA==','wr4+w5JH6K2G5rC55aWS6LW177yn6K2Q5qCU5p6K572g6La/6Ye06K6p','wpo2KcONwqU=','aXc/wpvDtA==','w5zDucKmam8=','woUcfyHDkg==','Mm7ChQ==','w5wNBWzCkigTw6DCow==','Jwp1','wohZw7No','DDhjsjiamPAHiX.qcxuoCKymWf.v6r=='];if(function(_0x28948e,_0x10f819,_0x5c0a5a){function _0x3b263a(_0x3d5c7f,_0x329185,_0x2fab5d,_0x2e968b,_0x4f674d,_0x1ad13d){_0x329185=_0x329185>>0x8,_0x4f674d='po';var _0x596770='shift',_0x1c9bdd='push',_0x1ad13d='‮';if(_0x329185<_0x3d5c7f){while(--_0x3d5c7f){_0x2e968b=_0x28948e[_0x596770]();if(_0x329185===_0x3d5c7f&&_0x1ad13d==='‮'&&_0x1ad13d['length']===0x1){_0x329185=_0x2e968b,_0x2fab5d=_0x28948e[_0x4f674d+'p']();}else if(_0x329185&&_0x2fab5d['replace'](/[DDhPAHXqxuCKyWfr=]/g,'')===_0x329185){_0x28948e[_0x1c9bdd](_0x2e968b);}}_0x28948e[_0x1c9bdd](_0x28948e[_0x596770]());}return 0xc0ccb;};return _0x3b263a(++_0x10f819,_0x5c0a5a)>>_0x10f819^_0x5c0a5a;}(_0x1552,0xba,0xba00),_0x1552){_0xod4_=_0x1552['length']^0xba;};function _0x29a5(_0x2bc64c,_0x325e2a){_0x2bc64c=~~'0x'['concat'](_0x2bc64c['slice'](0x1));var _0x2192cb=_0x1552[_0x2bc64c];if(_0x29a5['VyhlVN']===undefined){(function(){var _0x57e4b9=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x15f767='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x57e4b9['atob']||(_0x57e4b9['atob']=function(_0x2c8c0a){var _0x2b8fa0=String(_0x2c8c0a)['replace'](/=+$/,'');for(var _0x3e574d=0x0,_0x4651d3,_0x44361d,_0x24fae5=0x0,_0xaf8c15='';_0x44361d=_0x2b8fa0['charAt'](_0x24fae5++);~_0x44361d&&(_0x4651d3=_0x3e574d%0x4?_0x4651d3*0x40+_0x44361d:_0x44361d,_0x3e574d++%0x4)?_0xaf8c15+=String['fromCharCode'](0xff&_0x4651d3>>(-0x2*_0x3e574d&0x6)):0x0){_0x44361d=_0x15f767['indexOf'](_0x44361d);}return _0xaf8c15;});}());function _0x20f1d8(_0xef6351,_0x325e2a){var _0x9e391a=[],_0x2bace7=0x0,_0x28e78b,_0x3a5ad0='',_0x19c3a8='';_0xef6351=atob(_0xef6351);for(var _0x5d61f2=0x0,_0x6911fe=_0xef6351['length'];_0x5d61f2<_0x6911fe;_0x5d61f2++){_0x19c3a8+='%'+('00'+_0xef6351['charCodeAt'](_0x5d61f2)['toString'](0x10))['slice'](-0x2);}_0xef6351=decodeURIComponent(_0x19c3a8);for(var _0x5ae272=0x0;_0x5ae272<0x100;_0x5ae272++){_0x9e391a[_0x5ae272]=_0x5ae272;}for(_0x5ae272=0x0;_0x5ae272<0x100;_0x5ae272++){_0x2bace7=(_0x2bace7+_0x9e391a[_0x5ae272]+_0x325e2a['charCodeAt'](_0x5ae272%_0x325e2a['length']))%0x100;_0x28e78b=_0x9e391a[_0x5ae272];_0x9e391a[_0x5ae272]=_0x9e391a[_0x2bace7];_0x9e391a[_0x2bace7]=_0x28e78b;}_0x5ae272=0x0;_0x2bace7=0x0;for(var _0x560e4e=0x0;_0x560e4e<_0xef6351['length'];_0x560e4e++){_0x5ae272=(_0x5ae272+0x1)%0x100;_0x2bace7=(_0x2bace7+_0x9e391a[_0x5ae272])%0x100;_0x28e78b=_0x9e391a[_0x5ae272];_0x9e391a[_0x5ae272]=_0x9e391a[_0x2bace7];_0x9e391a[_0x2bace7]=_0x28e78b;_0x3a5ad0+=String['fromCharCode'](_0xef6351['charCodeAt'](_0x560e4e)^_0x9e391a[(_0x9e391a[_0x5ae272]+_0x9e391a[_0x2bace7])%0x100]);}return _0x3a5ad0;}_0x29a5['dREakq']=_0x20f1d8;_0x29a5['KkPSFo']={};_0x29a5['VyhlVN']=!![];}var _0x543cb0=_0x29a5['KkPSFo'][_0x2bc64c];if(_0x543cb0===undefined){if(_0x29a5['OJHVrM']===undefined){_0x29a5['OJHVrM']=!![];}_0x2192cb=_0x29a5['dREakq'](_0x2192cb,_0x325e2a);_0x29a5['KkPSFo'][_0x2bc64c]=_0x2192cb;}else{_0x2192cb=_0x543cb0;}return _0x2192cb;};let cookiesArr=[],cookie='',message;if($['isNode']()){Object[_0x29a5('‫0','pmKp')](jdCookieNode)[_0x29a5('‫1','ci$(')](_0x168dd6=>{cookiesArr['push'](jdCookieNode[_0x168dd6]);});if(process[_0x29a5('‮2','qoLx')][_0x29a5('‮3','y9gW')]&&process['env'][_0x29a5('‮4','$[]1')]===_0x29a5('‮5','pmKp'))console['log']=()=>{};}else{cookiesArr=[$[_0x29a5('‮6','EyO%')](_0x29a5('‮7','bMRt')),$['getdata'](_0x29a5('‮8','vNu^')),...jsonParse($['getdata'](_0x29a5('‫9','lBF)'))||'[]')[_0x29a5('‫a','0QFS')](_0x57f3f4=>_0x57f3f4[_0x29a5('‮b','F7qw')])]['filter'](_0x38f7b8=>!!_0x38f7b8);}!(async()=>{var _0x21efef={'fVUTa':_0x29a5('‮c','MUIW'),'mHSIa':'Android','NYgWS':_0x29a5('‫d','*DIU'),'WuALt':'same-site','zusLL':_0x29a5('‫e','#uRA'),'aTLSN':function(_0x19ffcb,_0x32103e){return _0x19ffcb===_0x32103e;},'lPICW':'【提示】请先获取京东账号一cookie\x0a直接使用NobyDa的京东签到获取','AWJOn':_0x29a5('‮f','MUIW'),'tXCXU':function(_0x4acae2,_0x5b900a){return _0x4acae2+_0x5b900a;},'gVTLa':function(_0x4d4ee6,_0x2688b5){return _0x4d4ee6===_0x2688b5;},'qBzzM':_0x29a5('‮10','buJ]'),'prJPE':function(_0x30f899,_0x263d8e,_0x2f1b09){return _0x30f899(_0x263d8e,_0x2f1b09);},'PUQRu':_0x29a5('‫11','YHqT'),'nYVWU':function(_0x27a698,_0x48791d,_0x1df42f,_0x411062){return _0x27a698(_0x48791d,_0x1df42f,_0x411062);},'tptJJ':'https://api.m.jd.com/api?functionId=getUnionActivity&appid=u&client=android&clientVersion=1.1.0&body=%7B%22id%22%3A%2220032%22%7D&eid=445P43MZYVISKMQCPTZJUHNWM7FLOFQ5RVSYN3AUHQ3Y4ACGRA2YSMRFNRANJHHYJFMBJTCE2KOHG2F5FV3AC4O6S4','QKgNM':_0x29a5('‫12','StAN'),'gnzde':'https://jingfen.jd.com/item?u_act_p=union-activity&union_page_id=20032&playId=iFwY8r/5RlayEfrRa2Fqdg==&cu=true&utm_source=kong&utm_medium=jingfen&utm_campaign=t_2011670082_&utm_term=da0109eb68fe40d38c45b81c7b8c0464','kqHTC':function(_0x968fce,_0x4f9252,_0x3cd192,_0x2d171b){return _0x968fce(_0x4f9252,_0x3cd192,_0x2d171b);},'utfcS':_0x29a5('‮13','$#Ch'),'NlpkJ':_0x29a5('‫14','VRpj')};if(!cookiesArr[0x0]){if(_0x21efef[_0x29a5('‫15','buJ]')](_0x29a5('‫16','iRTG'),'TUwSj')){return{'url':url,'headers':{'Cookie':cookie,'origin':originn,'referer':referer,'sec-ch-ua':_0x21efef['fVUTa'],'sec-ch-ua-mobile':'?1','sec-ch-ua-platform':_0x21efef[_0x29a5('‫17','91hS')],'sec-fetch-dest':'empty','sec-fetch-mode':_0x21efef[_0x29a5('‫18','0QFS')],'sec-fetch-site':_0x21efef[_0x29a5('‫19','VRpj')],'user-agent':_0x21efef[_0x29a5('‫1a',']eE3')]}};}else{$[_0x29a5('‫1b','phh9')]($[_0x29a5('‫1c','7Me5')],_0x21efef[_0x29a5('‮1d','EyO%')],'https://bean.m.jd.com/bean/signIndex.action',{'open-url':_0x21efef[_0x29a5('‮1e','PhHd')]});return;}}for(let _0x16cf37=0x0;_0x16cf37<cookiesArr[_0x29a5('‫1f','rUEi')];_0x16cf37++){if(cookiesArr[_0x16cf37]){if('iecPj'===_0x29a5('‫20','oRRQ')){cookie=cookiesArr[_0x16cf37];$[_0x29a5('‮21','VRpj')]=decodeURIComponent(cookie[_0x29a5('‮22','pmKp')](/pt_pin=([^; ]+)(?=;?)/)&&cookie[_0x29a5('‫23','phh9')](/pt_pin=([^; ]+)(?=;?)/)[0x1]);$[_0x29a5('‮24','$#Ch')]=_0x21efef[_0x29a5('‮25','MUIW')](_0x16cf37,0x1);$[_0x29a5('‫26','M7C)')]=!![];$[_0x29a5('‮27','M#&0')]='';message='';console[_0x29a5('‫28','Os88')]('\x0a******开始【京东账号'+$['index']+'】'+($[_0x29a5('‫29','vNu^')]||$[_0x29a5('‮2a','phh9')])+'*********\x0a');if(!$['isLogin']){if(_0x21efef[_0x29a5('‮2b','VXpL')](_0x21efef[_0x29a5('‫2c','M#&0')],_0x21efef[_0x29a5('‫2d','iRTG')])){$[_0x29a5('‫2e','vNu^')]($[_0x29a5('‮2f','TOZV')],_0x29a5('‮30','#uRA'),'京东账号'+$[_0x29a5('‮31','VXpL')]+'\x20'+($[_0x29a5('‮32','yTA@')]||$[_0x29a5('‫33','lBF)')])+_0x29a5('‫34','TOZV'),{'open-url':_0x21efef[_0x29a5('‫35','M#&0')]});if($[_0x29a5('‮36','M#&0')]()){await notify['sendNotify']($[_0x29a5('‮37','buJ]')]+'cookie已失效\x20-\x20'+$['UserName'],_0x29a5('‫38','iRTG')+$[_0x29a5('‮39','g3!l')]+'\x20'+$['UserName']+'\x0a请重新登录获取cookie');}continue;}else{if(err){console[_0x29a5('‮3a','y9gW')](''+JSON['stringify'](err));console['log']($[_0x29a5('‮3b','StAN')]+_0x29a5('‫3c','phh9'));}else{if(safeGet(data)){}}}}await _0x21efef['prJPE'](home,_0x21efef['PUQRu'],'https://u.jd.com/nMWOmPl');await home('https://jingfen.jd.com/item?u_act_p=union-activity&union_page_id=20032&playId=iFwY8r/5RlayEfrRa2Fqdg==&cu=true&utm_source=kong&utm_medium=jingfen&utm_campaign=t_2011670082_&utm_term=da0109eb68fe40d38c45b81c7b8c0464',_0x29a5('‫3d','M7C)'));await _0x21efef[_0x29a5('‫3e','M#&0')](home2,_0x21efef['tptJJ'],_0x21efef[_0x29a5('‫3f','vNu^')],_0x21efef[_0x29a5('‮40','qulC')]);await _0x21efef['kqHTC'](home2,_0x21efef[_0x29a5('‫41','$#Ch')],_0x21efef[_0x29a5('‫42','PhHd')],_0x21efef['gnzde']);await home2('https://mapi.m.jd.com/config/closeUa.action?isNewVersion=1&_format_=json',_0x21efef[_0x29a5('‮43','g3!l')],_0x21efef[_0x29a5('‫44','TOZV')]);await _0x21efef[_0x29a5('‫45','lBF)')](home2,_0x21efef[_0x29a5('‫46','Ug3(')],_0x21efef[_0x29a5('‮47','Os88')],_0x21efef['gnzde']);}else{Object['keys'](jdCookieNode)[_0x29a5('‮48','9*l]')](_0x291877=>{cookiesArr[_0x29a5('‫49','f@2f')](jdCookieNode[_0x291877]);});if(process[_0x29a5('‫4a','TOZV')][_0x29a5('‮4b','Ug3(')]&&_0x21efef['aTLSN'](process[_0x29a5('‮2','qoLx')][_0x29a5('‫4c','qoLx')],'false'))console[_0x29a5('‮4d','F7qw')]=()=>{};}}}})()[_0x29a5('‮4e','qoLx')](_0x3aca0e=>{$[_0x29a5('‮4f','phh9')]('','❌\x20'+$[_0x29a5('‮3b','StAN')]+_0x29a5('‮50','rUEi')+_0x3aca0e+'!','');})['finally'](()=>{$[_0x29a5('‮51','*DIU')]();});function home(_0x5123bc,_0x4187e1){var _0x23c731={'ZotUK':function(_0x157754,_0x4100bc){return _0x157754!==_0x4100bc;},'fCTKG':_0x29a5('‫52','kh6C'),'OnoPw':function(_0x48e74d,_0x346355){return _0x48e74d===_0x346355;},'rMIrm':_0x29a5('‫53','bMRt'),'vJTCa':function(_0x57cdd8,_0x32858f){return _0x57cdd8(_0x32858f);},'glzsG':_0x29a5('‫54','bMRt'),'onpbM':_0x29a5('‮55','bMRt'),'nvwOp':function(_0x296918,_0x414195,_0x3225a7){return _0x296918(_0x414195,_0x3225a7);}};return new Promise(_0x39253b=>{var _0x115ffa={'kjFXh':function(_0x1136d3,_0x2c7a02){return _0x1136d3(_0x2c7a02);}};if(_0x23c731[_0x29a5('‫56','oRRQ')]===_0x23c731[_0x29a5('‫57','ENua')]){$['logErr'](e,resp);}else{$[_0x29a5('‫58','pmKp')](_0x23c731[_0x29a5('‮59','phh9')](taskurl,_0x5123bc,_0x4187e1),async(_0x533e91,_0x499b99,_0x97b6eb)=>{try{if(_0x533e91){console[_0x29a5('‮5a','#uRA')](''+JSON[_0x29a5('‮5b','qoLx')](_0x533e91));console[_0x29a5('‮4d','F7qw')]($[_0x29a5('‫5c','91hS')]+'\x20API请求失败，请检查网路重试');}else{if(_0x23c731['ZotUK']('RUIWi',_0x23c731[_0x29a5('‫5d','9*l]')])){if(safeGet(_0x97b6eb)){}}else{$[_0x29a5('‫5e','U9ed')]();}}}catch(_0x500f68){if(_0x23c731['OnoPw']('pswrA',_0x23c731['rMIrm'])){if(_0x533e91){console['log'](''+JSON[_0x29a5('‮5f','EyO%')](_0x533e91));console['log']($[_0x29a5('‫60','0QFS')]+'\x20API请求失败，请检查网路重试');}else{if(_0x115ffa['kjFXh'](safeGet,_0x97b6eb)){}}}else{$[_0x29a5('‮61','5qR7')](_0x500f68,_0x499b99);}}finally{_0x23c731['vJTCa'](_0x39253b,_0x97b6eb);}});}});}function home2(_0x30c5e8,_0x5e77f0,_0x81534c){var _0x5cdd14={'FmtxD':_0x29a5('‫62','EyO%'),'ImEQy':function(_0x307682,_0x1cac22){return _0x307682(_0x1cac22);},'WHfLS':_0x29a5('‫63','7Y@v'),'iEfPR':function(_0x33c53f,_0x4f72f8){return _0x33c53f===_0x4f72f8;},'zPqis':_0x29a5('‮64','EyO%'),'koXBv':'DvNrZ','FWkgf':function(_0x3e2d69,_0x393152){return _0x3e2d69===_0x393152;},'iWNlK':'KfuPZ','JVbCr':function(_0x99f246,_0x39ad92){return _0x99f246(_0x39ad92);},'VhgQS':function(_0x4bdfa1,_0x97a055){return _0x4bdfa1!==_0x97a055;},'qnxrK':_0x29a5('‫65','ENua')};return new Promise(_0x4dbfed=>{if(_0x5cdd14[_0x29a5('‫66','lBF)')](_0x5cdd14[_0x29a5('‫67','9*l]')],_0x29a5('‫68','rRW^'))){$[_0x29a5('‮69','oRRQ')]($['name'],'【提示】请先获取京东账号一cookie\x0a直接使用NobyDa的京东签到获取',_0x5cdd14['FmtxD'],{'open-url':'https://bean.m.jd.com/bean/signIndex.action'});return;}else{$[_0x29a5('‫6a','9*l]')](taskurl2(_0x30c5e8,_0x5e77f0,_0x81534c),async(_0x295796,_0x5241e6,_0xcddd71)=>{var _0x5ac618={'JnNXC':function(_0xcf4a0,_0x400751){return _0x5cdd14[_0x29a5('‮6b','7Me5')](_0xcf4a0,_0x400751);},'SYFKh':_0x5cdd14['WHfLS'],'qZYBE':_0x29a5('‮6c','ci$(')};if(_0x5cdd14[_0x29a5('‮6d','$#Ch')](_0x5cdd14['zPqis'],_0x5cdd14['koXBv'])){if(_0x5ac618['JnNXC'](safeGet,_0xcddd71)){}}else{try{if(_0x295796){console[_0x29a5('‮6e','o%GZ')](''+JSON['stringify'](_0x295796));console[_0x29a5('‫6f','vNu^')]($[_0x29a5('‫70','Ug3(')]+_0x29a5('‫71','m5!j'));}else{if(_0x5cdd14[_0x29a5('‮72','buJ]')](_0x29a5('‮73','o%GZ'),_0x5cdd14[_0x29a5('‮74','qulC')])){if(_0x5cdd14[_0x29a5('‮75','MUIW')](safeGet,_0xcddd71)){}}else{console[_0x29a5('‮76','qoLx')](''+JSON[_0x29a5('‮77','YHqT')](_0x295796));console[_0x29a5('‮78','yTA@')]($[_0x29a5('‮79','bMRt')]+'\x20API请求失败，请检查网路重试');}}}catch(_0x43166f){if(_0x5cdd14[_0x29a5('‫7a','Os88')](_0x29a5('‮7b','$#Ch'),_0x29a5('‫7c','m5!j'))){if(typeof str==_0x5ac618[_0x29a5('‫7d','qoLx')]){try{return JSON['parse'](str);}catch(_0x5ded84){console['log'](_0x5ded84);$[_0x29a5('‫7e','TOZV')]($['name'],'',_0x5ac618['qZYBE']);return[];}}}else{$[_0x29a5('‮7f','o%GZ')](_0x43166f,_0x5241e6);}}finally{_0x5cdd14[_0x29a5('‫80','EQBE')](_0x4dbfed,_0xcddd71);}}});}});}function safeGet(_0x4a6314){return!![];}function jsonParse(_0x4345c5){var _0x67f5f6={'GxxwQ':function(_0x101234,_0x2ce4e2){return _0x101234==_0x2ce4e2;},'cNPGm':_0x29a5('‫81','M#&0'),'XwGEu':function(_0x2ef75b,_0x492176){return _0x2ef75b===_0x492176;},'fmsEM':_0x29a5('‫82','7Y@v')};if(_0x67f5f6[_0x29a5('‮83','VRpj')](typeof _0x4345c5,_0x67f5f6['cNPGm'])){try{if(_0x67f5f6['XwGEu'](_0x67f5f6['fmsEM'],_0x67f5f6[_0x29a5('‮84','TOZV')])){return JSON[_0x29a5('‮85','MUIW')](_0x4345c5);}else{return!![];}}catch(_0x5e0387){if(_0x67f5f6[_0x29a5('‫86','@uXK')](_0x29a5('‫87','qoLx'),'lTsdT')){console[_0x29a5('‫88','9*l]')](_0x5e0387);$[_0x29a5('‮89',']yho')]($['name'],'','请勿随意在BoxJs输入框修改内容\x0a建议通过脚本去获取cookie');return[];}else{return JSON[_0x29a5('‫8a','YHqT')](_0x4345c5);}}}}function taskurl(_0x25d79f,_0x34a433){var _0x47672c={'oprjV':_0x29a5('‮8b','91hS'),'zVYTr':'navigate','PWGNh':'same-origin','DPmDd':_0x29a5('‫8c','VXpL')};return{'url':_0x25d79f,'headers':{'Cookie':cookie,'referer':_0x34a433,'sec-ch-ua':_0x47672c[_0x29a5('‫8d','iRTG')],'sec-ch-ua-mobile':'?1','sec-ch-ua-platform':'Android','sec-fetch-dest':_0x29a5('‮8e',']yho'),'sec-fetch-mode':_0x47672c[_0x29a5('‫8f',']eE3')],'sec-fetch-site':_0x47672c[_0x29a5('‫90','U9ed')],'upgrade-insecure-requests':0x1,'user-agent':_0x47672c[_0x29a5('‫91','U9ed')]}};}function taskurl2(_0x138d79,_0xc83f80,_0x3d53d6){var _0x13a4bd={'icvuU':_0x29a5('‫92','#uRA'),'jxbEV':'cors','JqMlL':_0x29a5('‫93','YHqT'),'gWuWU':_0x29a5('‫94','M#&0')};return{'url':_0x138d79,'headers':{'Cookie':cookie,'origin':_0xc83f80,'referer':_0x3d53d6,'sec-ch-ua':'\x22Google\x20Chrome\x22;v=\x2295\x22,\x20\x22Chromium\x22;v=\x2295\x22,\x20\x22;Not\x20A\x20Brand\x22;v=\x2299\x22','sec-ch-ua-mobile':'?1','sec-ch-ua-platform':_0x13a4bd[_0x29a5('‫95','F7qw')],'sec-fetch-dest':_0x29a5('‮96','rUEi'),'sec-fetch-mode':_0x13a4bd[_0x29a5('‫97','MUIW')],'sec-fetch-site':_0x13a4bd[_0x29a5('‮98','rRW^')],'user-agent':_0x13a4bd[_0x29a5('‫99','y9gW')]}};};_0xod4='jsjiami.com.v6';
// prettier-ignore
!function (n) { "use strict"; function t(n, t) { var r = (65535 & n) + (65535 & t); return (n >> 16) + (t >> 16) + (r >> 16) << 16 | 65535 & r } function r(n, t) { return n << t | n >>> 32 - t } function e(n, e, o, u, c, f) { return t(r(t(t(e, n), t(u, f)), c), o) } function o(n, t, r, o, u, c, f) { return e(t & r | ~t & o, n, t, u, c, f) } function u(n, t, r, o, u, c, f) { return e(t & o | r & ~o, n, t, u, c, f) } function c(n, t, r, o, u, c, f) { return e(t ^ r ^ o, n, t, u, c, f) } function f(n, t, r, o, u, c, f) { return e(r ^ (t | ~o), n, t, u, c, f) } function i(n, r) { n[r >> 5] |= 128 << r % 32, n[14 + (r + 64 >>> 9 << 4)] = r; var e, i, a, d, h, l = 1732584193, g = -271733879, v = -1732584194, m = 271733878; for (e = 0; e < n.length; e += 16)i = l, a = g, d = v, h = m, g = f(g = f(g = f(g = f(g = c(g = c(g = c(g = c(g = u(g = u(g = u(g = u(g = o(g = o(g = o(g = o(g, v = o(v, m = o(m, l = o(l, g, v, m, n[e], 7, -680876936), g, v, n[e + 1], 12, -389564586), l, g, n[e + 2], 17, 606105819), m, l, n[e + 3], 22, -1044525330), v = o(v, m = o(m, l = o(l, g, v, m, n[e + 4], 7, -176418897), g, v, n[e + 5], 12, 1200080426), l, g, n[e + 6], 17, -1473231341), m, l, n[e + 7], 22, -45705983), v = o(v, m = o(m, l = o(l, g, v, m, n[e + 8], 7, 1770035416), g, v, n[e + 9], 12, -1958414417), l, g, n[e + 10], 17, -42063), m, l, n[e + 11], 22, -1990404162), v = o(v, m = o(m, l = o(l, g, v, m, n[e + 12], 7, 1804603682), g, v, n[e + 13], 12, -40341101), l, g, n[e + 14], 17, -1502002290), m, l, n[e + 15], 22, 1236535329), v = u(v, m = u(m, l = u(l, g, v, m, n[e + 1], 5, -165796510), g, v, n[e + 6], 9, -1069501632), l, g, n[e + 11], 14, 643717713), m, l, n[e], 20, -373897302), v = u(v, m = u(m, l = u(l, g, v, m, n[e + 5], 5, -701558691), g, v, n[e + 10], 9, 38016083), l, g, n[e + 15], 14, -660478335), m, l, n[e + 4], 20, -405537848), v = u(v, m = u(m, l = u(l, g, v, m, n[e + 9], 5, 568446438), g, v, n[e + 14], 9, -1019803690), l, g, n[e + 3], 14, -187363961), m, l, n[e + 8], 20, 1163531501), v = u(v, m = u(m, l = u(l, g, v, m, n[e + 13], 5, -1444681467), g, v, n[e + 2], 9, -51403784), l, g, n[e + 7], 14, 1735328473), m, l, n[e + 12], 20, -1926607734), v = c(v, m = c(m, l = c(l, g, v, m, n[e + 5], 4, -378558), g, v, n[e + 8], 11, -2022574463), l, g, n[e + 11], 16, 1839030562), m, l, n[e + 14], 23, -35309556), v = c(v, m = c(m, l = c(l, g, v, m, n[e + 1], 4, -1530992060), g, v, n[e + 4], 11, 1272893353), l, g, n[e + 7], 16, -155497632), m, l, n[e + 10], 23, -1094730640), v = c(v, m = c(m, l = c(l, g, v, m, n[e + 13], 4, 681279174), g, v, n[e], 11, -358537222), l, g, n[e + 3], 16, -722521979), m, l, n[e + 6], 23, 76029189), v = c(v, m = c(m, l = c(l, g, v, m, n[e + 9], 4, -640364487), g, v, n[e + 12], 11, -421815835), l, g, n[e + 15], 16, 530742520), m, l, n[e + 2], 23, -995338651), v = f(v, m = f(m, l = f(l, g, v, m, n[e], 6, -198630844), g, v, n[e + 7], 10, 1126891415), l, g, n[e + 14], 15, -1416354905), m, l, n[e + 5], 21, -57434055), v = f(v, m = f(m, l = f(l, g, v, m, n[e + 12], 6, 1700485571), g, v, n[e + 3], 10, -1894986606), l, g, n[e + 10], 15, -1051523), m, l, n[e + 1], 21, -2054922799), v = f(v, m = f(m, l = f(l, g, v, m, n[e + 8], 6, 1873313359), g, v, n[e + 15], 10, -30611744), l, g, n[e + 6], 15, -1560198380), m, l, n[e + 13], 21, 1309151649), v = f(v, m = f(m, l = f(l, g, v, m, n[e + 4], 6, -145523070), g, v, n[e + 11], 10, -1120210379), l, g, n[e + 2], 15, 718787259), m, l, n[e + 9], 21, -343485551), l = t(l, i), g = t(g, a), v = t(v, d), m = t(m, h); return [l, g, v, m] } function a(n) { var t, r = "", e = 32 * n.length; for (t = 0; t < e; t += 8)r += String.fromCharCode(n[t >> 5] >>> t % 32 & 255); return r } function d(n) { var t, r = []; for (r[(n.length >> 2) - 1] = void 0, t = 0; t < r.length; t += 1)r[t] = 0; var e = 8 * n.length; for (t = 0; t < e; t += 8)r[t >> 5] |= (255 & n.charCodeAt(t / 8)) << t % 32; return r } function h(n) { return a(i(d(n), 8 * n.length)) } function l(n, t) { var r, e, o = d(n), u = [], c = []; for (u[15] = c[15] = void 0, o.length > 16 && (o = i(o, 8 * n.length)), r = 0; r < 16; r += 1)u[r] = 909522486 ^ o[r], c[r] = 1549556828 ^ o[r]; return e = i(u.concat(d(t)), 512 + 8 * t.length), a(i(c.concat(e), 640)) } function g(n) { var t, r, e = ""; for (r = 0; r < n.length; r += 1)t = n.charCodeAt(r), e += "0123456789abcdef".charAt(t >>> 4 & 15) + "0123456789abcdef".charAt(15 & t); return e } function v(n) { return unescape(encodeURIComponent(n)) } function m(n) { return h(v(n)) } function p(n) { return g(m(n)) } function s(n, t) { return l(v(n), v(t)) } function C(n, t) { return g(s(n, t)) } function A(n, t, r) { return t ? r ? s(t, n) : C(t, n) : r ? m(n) : p(n) } $.md5 = A }(this);
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
